# INDEX

## 01. INDEX 개요

### INDEX 개념
- 데이타베이스 테이블의 검색 속도를 높여주는 도구
- 특정 컬럼에 인덱스 생성 시 해당 컬럼의 데이터를 정렬하여 별도 메모리 공간에 물리적 주소와 함께 저장됨

### INDEX 장점
- 대용량 테이블의 데이터를 빠르게 찾을 수 있도록 해주는 도구
- 튜닝에 즉각적인 효과를 내는 가장 빠른 방법 중의 하나임
- 데이터의 중복도가 높지 않아야 함

### INDEX 단점
- 테이블 공간대비 약 10~20% 공간 차지
- 테이블 데이터가 많은 경우 최초 INDEX 생성 시  많은 시간 소요
- CUD 작업이 많은 경우 성능 저하 우려 있음

## 02. INDEX 종류 / 특징

### 클러스터형 인덱스 
- 테이블당 한 개만 생성
- 물리적으로 데이터를 정렬시킴
- PRIMARY KEY가 클러스터형 인덱스임
- PIRMARY KEY가 없을 경우 UNIQUE NOT NULL 컬럼이 클러스터형 인덱스가 됨

#### 클러스터형 인덱스 특징 
- 인덱스 생성 시 데이터 전체 다시 정렬
- 행 데이터를 인덱스로 지정한 컬럼에 맞춰 자동 정렬
- 보조 인덱스보다 검색 속도는 빠름
- 데이터 입력/수정/삭제는 느림

### 보조 인덱스
- 테이블당 여러 개 생성 가능
- 데이터 페이지의 위치 정보를 인덱스로 구성
- 여러 컬럼을 조합하여 생성 가능
- 책 뒤편에 있는 <찾아보기>

#### 보조 인덱스 특징 
- 인덱스 생성 시 데이터 정렬 불필요
- 클러스터형 인덱스보다 속도 느림
- 여러 개 생성 가능하나 많을 경우 성능 저하의 원인이 됨

## 03. INDEX 생성 / 삭제

### 인덱스 생성
- 생성 구문  
```sql
CREATE [UNIQUE] INDEX 인덱스명
	ON 테이블명 (인덱스컬럼1, 인덱스컬럼2);
```
- UNIQUE : 고유한 인덱스 생성시 사용, 동일한 데이터 값 입력 불가
- CREATE INDEX로 생성한 인덱스는 보조 인덱스 임

### 인덱스 삭제
- 삭제 구문
```sql
DROP INDEX 인덱스명
	ON 테이블명;
```  
- ALTER TABLE문으로 PRIMARY KEY 제거 시 클러스터 인덱스 삭제됨
```sql
ALTER TABLE  테이블명 
	DROP PRIMARY KEY;
```
- 인덱스 삭제는 보조 인덱스부터 삭제
- 인덱스 활용도가 적을 시 삭제하는 것이 전체 성능에 도움이 됨

## 04. INDEX 성능

### 테이블 통계정보 생성
- 인덱스 생성 후 테이블 통계정보 생성
```sql
ANALYZE TABLE 테이블명;
```
### 실행계획 확인
```sql
EXPLAIN SELECT 문장;
```

### 강제로 인덱스 제외
```sql
EXPLAIN SELECT 컬럼 FROM 테이블명
			IGNORE INDEX(인덱스명) WHERE 조건문;
```

### 컬럼 가공시 인덱스 적용되지 않음
```sql
EXPLAIN SELECT 컬럼 FROM 테이블명
			WHERE LEFT(컬럼, 2) = 값;
```

### 강제로 인덱스 적용
```sql
EXPLAIN SELECT 컬럼 FROM 테이블명
			USE INDEX(인덱스명) WHERE 조건문;
```

### 인덱스 설정 기준
- WHERE 조건에 자주 사용되는 컬럼
- JOIN이 자주 사용되는 컬럼
- 범위(BETWEEN, >, < 등의 조건)로 사용하거나 집계함수 사용되는 컬럼
- ORDER BY 절에 자주 사용되는 컬럼

### 인덱스 설정시 고려사항
- INSERT / UPDATE / DELETE의 빈도 수가 많은 경우
- INSERT가 빈번한 테이블은 PK보다 UNIQUE KEY 설정 고려
- 생성한 인덱스 중 사용빈도수가 적은 인덱스는 제거

